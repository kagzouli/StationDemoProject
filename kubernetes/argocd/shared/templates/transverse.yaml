apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: transverse
  namespace: transverse
  finalizers:
  - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    server: https://kubernetes.default.svc
    namespace: default
  project: default
  source:
    chart: transverse
    helm:
      releaseName: transverse
      parameters: 
        - name: stationback.ingress.targetGroupARN
          value: {{ .Values.station.back.ingressarn | quote }}
        - name: stationback.albiplist
          value: {{ .Values.station.back.albiplist | quote }}
        - name: stationfront.ingress.targetGroupARN
          value: {{ .Values.station.front.ingressarn | quote }}
        - name: stationfront.albiplist
          value: {{ .Values.station.front.albiplist | quote }}
        - name: stationredis.mode
          value: {{ .Values.station.redis.mode | quote }}
        - name: stationredis.usessl
          value: {{ .Values.station.redis.usessl  }}
        - name: stationdb.mode
          value: {{ .Values.station.db.mode | quote }}
        - name: stationdb.storage.storageClass
          value: "none"
        - name: stationdb.storage.efsid
          value: ""
        - name: stationdb.storage.efsaccesspointid
          value: ""

    repoURL: {{ .Values.helm.repository | quote }} 
    targetRevision: 1.0.0
  syncPolicy:
    automated:
      prune: true
      selfHeal: true